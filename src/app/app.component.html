<main class="main">
  <div class="container">
    <mat-tab-group #tabGroup class="main-info">
      <!-- Products Tab -->
      <mat-tab label="Products">
        <div class="products">
          <h2>Products</h2>
          <button (click)="fetchProducts()">Load Products</button>
          <ul>
            <li *ngFor="let product of products">
              {{ product.name }} - ${{ product.price }}
              <button (click)="addToBag(product.id)">Add to Bag</button>
            </li>
          </ul>
        </div>
      </mat-tab>

      <!-- Bag Tab -->
      <mat-tab label="Bag">
        <div class="bag">
          <h2>Your Bag</h2>
          <button (click)="fetchBag()">View Bag</button>
          <ul *ngFor="let bagItem of bag">
            <li *ngFor="let product of bagItem.productList">
              {{ product?.name }} - ${{ product?.price }} x {{ product?.quantity }}
              <button (click)="removeFromBag(product.id, bagItem.userIsCart.id)">Remove</button>
            </li>
            <button *ngIf="bag.length > 0" (click)="checkout()">Checkout</button>
          </ul>

        </div>
      </mat-tab>

      <!-- User Tab -->
      <mat-tab label="User">
        <div class="user">
          <h2>User Info</h2>
          <button (click)="fetchUsers()">Load Users</button>
          <ul>
            <li *ngFor="let user of users">
              {{ user.fullName }} - Balance: ${{ user.balance }}
              <button (click)="updateBalance(user.id, 100)">Add $100</button>
              <button (click)="selectUser(user.id)">Select as User</button>
            </li>
          </ul>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</main>
